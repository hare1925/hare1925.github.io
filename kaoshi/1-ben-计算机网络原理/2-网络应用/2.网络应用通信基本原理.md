# 第二章 网络应用 第二节 网络应用通信基本原理

**网络应用的本质是**运行在不同主机上（当然也可以是运行在同以主机上）的应用进程之间的通信。  
无论从上述哪种类型的网络应用，基本通信方式都是 C/S 通信，因此，网络应用的基本通信过程就是运行在不同主机上的应用进行之间以 C/S 方式进行的通信。  
在 C/S 结构的网络应用中，服务器端运行的是服务器进程，被动的等待客户请求服务；客户端运行的是客户进程，主动发起通信，请求服务器进程提供服务。应用进程间遵循应用层协议价换应用层报文M。  

**应用层协议定义了应用进程间交换的报文类型、报文构成部分具体含义以及交换时序等内容，即语法、语义和时序等歇息三要素内容。**  
从应用层角度来看，应用进程之间遵照应用层协议就可以直接实现端到端的报文 M 的交换。  
但是，实质通信过程并非如此。无论是服务器进程还是客户进程，当中遵循应用层协议组织好应用层报文后，需要通过层间接口（如应用编程接口 API）将报文传递给相邻的传输层，请求传输层协议提供的端到端传输服务。  

典型的网络应用接口就是套接字（Socket），这种网络应用编程接口在网络应用开发过程中，尤其是 Internet 环境下被广泛采纳。  
应用进程可以通过创建套接字实现与底层协议接口，并可以进一步通过套接字实现应用进程与底层协议之间的报文交换。  
因此，套接字是每个应用进程与其他应用进程进行网络通信时，真正收发报文的通道。  

一个应用进程可以创建多个套接字与同一个或不同的传输层协议进行接口。对于一个传输层协议，需要为其接口的每个套接字分配一个编号，表示该套接字，该编号称为端口号（port number）。  
通常服务器进程套接字会分配特定端口号，而客户进程的套接字会绑定一个随机的唯一端口号。  
尤其是标准化应用，标准为不同的服务器分配了不同的默认端口号，比如 web 服务器的默认端口号是 80 ，这部分端口号称为熟知端口好（well-known port number).  
一个主机上可能同时运行多个网络应用进程，每个应用进程通过一个或多个套接字与传输层协议进行接口，因此，通过进程运行的主机 IP 地址以及其套接字所绑定的端口号可以标识应用进程。  
IP 地址是 Internet 的网络层地址，用于唯一标示一个主机或路由器接口。  

网络应用需要使用传输层提供端到端的传输服务，不同应用对传输层服务有不同的服务性能需求，有的应用期望传输层提供可靠的数据传输服务，有的应用期望传输层提供延时保障服务等。  
但是，传输层通常并不总满足所有网络应用的服务需求，尤其是对性能保障的需求。  
事实上，在实际网络中，传输层通常能够提供的服务类型以及服务性能都是有限的。  

例如，Internet 传输层能提供的服务只有两类：  
*面向连接的可靠字节流传输服务和无连接的不可靠数据报文传输服务，分别对应传输层的TCP和 UDP 。*  
这两类服务都不能提供时延保障或带宽保障服务。  

**TCP 服务模型包括面向连接服务和可靠数据传输服务。**  
当某个应用程序调用 TCP 作为其传输协议时，该应用程序就能获得来自 TCP 的这两种服务。  
- 面向连接的服务：在应用层报文开始传送之前，TCP 客户和服务器互相交换传输层控制信息，完成握手，在客户进程与服务器进程的套接字之间建立一条逻辑的 TCP连接。这条连接是全双工的，即连接双方的进程可以在此连接上同时进行报文收发。当应用程序结束报文发送时，必须拆除该连接。  
- 可靠的数据传送服务：应用进程能够依靠 TCP，实现端到端的无差错、按顺序交付所有发送数据的服务。当应用程序的一端将字节流通过本地套接字传送时，它能够依靠 TCP 将相同的字节流交付给接收方的套接字，而没有字节的丢失和冗余。  

UDP 是一种不提供传输服务保障的轻量级传输协议，仅提供最小的“尽力”服务。  
UDP 是无法连接的，因此在两个进程通信前没有握手过程。  
UDP 提供一种不可靠数据传送服务，也就是说，当进程将一个报文通过 UDP 套接字传送时，UDP 并不保证该报文将要达到接受进程。不仅如此，到达接收进程的报文也可能是乱序到达的。  

需要特别注意的是，Internet 传输层的 TCP 和 UDP 均不能提供端到端吞吐量以及时延保障服务。  

因此，在 Internet 上实现时间或带宽敏感的网络应用，需要一些设计技巧或解决方案。  

这个问题，有兴趣可自行百度。。。。。



