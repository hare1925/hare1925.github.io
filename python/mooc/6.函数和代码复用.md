# 第五章 函数和代码复用

**方法论** 
- Python基本代码抽象即函数的使用方法

**实践能力** 
- 学会编写带有函数并复用代码的程序

## 5.1 函数的定义与使用

- 函数的理解与定义
- 函数的使用及调用过程
- 函数的参数传递
- 函数的返回值
- 局部变量和全局变量
- lambda函数

### 函数的定义
- 函数是一段具有特定功能的、可重用的语句组
- 函数是一种功能的抽象、一般函数表达特定功能
- 两个作用：**降低变成难度** 和**代码复用** 

**函数是一段代码的表示** 

```py
def <函数名>(<参数(0个或多个)>):
    <函数体>
    return <返回值>
```

*案例* :计算n！

```py
def fact(n):
    s = 1
    for i in range(1, n+1):
        s *= i
    return s
```

**函数的定义** 需要注意的地方
- 函数定义时，所指定的参数是一种**占位符** 
- 函数定义后，如果不经过**调用** ，不会被执行
- 函数定义时，参数是输入、函数体是处理、结果是输出（IPO）

*简单理解* : 函数是IPO的一种实现，函数也是一段完整代码的一种封装

### 函数的使用及调用过程

**调用是运行函数代码的方式** 

`fact(10)` 函数的调用

- 调用时要给出实际参数
- 实际参数替换定义中参数
- 函数调用后得到返回值

### 参数个数

**函数可以有参数，也可以没有，但必须保留括号** 

### 可选参数传递

```py
def <函数名>(<非可选参数>,<可选参数>):
    <函数体>
    return <返回值>
```

**可选参数传递示例** 

```py
def fact(n, m=1):       # 设置m的默认值为 1
    s = 1
    for i in range(1, n+1):
        s *= i
    return s//m     # 定义返回值为s整除m

# 结果为：

>>> fact(10)        # 无可选参数
3628800

>>> fact(10, 5)     # 有可选参数
725760
```

### 可变参数传递

函数定义时可以设计可变数量参数，即不确定参数总数量

```py
def <函数名>(<参数>, *b ):      # 这里的b可以是一个自定义的变量
    <函数体>
    return <返回值>
```

**可变参数传递示例** 

```py
def fact(n, *b):
    s = 1
    for i in range(1, n+1):
        s *= i
    for item in b:
        s *= item
    return s

# 结果为：

>>> fact(10, 3)
10886400

>>> fact(10, 3, 5, 8)   #这里指的是可以同时给出多个可变参数，定逐一打印他们的结果
43546000
```

### 参数传递的两种方式

**位置传递** 

```py
>>> fact(10, 5)
```

**名称传递**  
指定形式参数m和n的值来定义  

```py
>>> fact(m=5, n=10)
```

### 函数的返回值

**函数可以返回0个或多个结果**  

- return保留字用来传递返回值
- 函数可以有返回值，也可以没有，可以有return，也可以没有
- return可以传递0个返回值，也可以传递任意多个返回值

**示例**  

```py
def fact(n, m=1):
    s = 1
    for i in range(1, n+1):
        s *= i
    return s//m, n, m

# 调用返回结果为:元组类型

>>> fact(10, 5)
(725760, 10, 5) # 这里是元组类型

# 调用返回给指定的值

>>> a, b, c = fact(10, 5)
>>> print(a, b, c)
725760 10 5
```

### 局部变量和全局变量

- **全局变量** 整个程序使用的变量
- **局部变量** 函数内部使用的变量

#### 局部变量和全局变量的使用规则

**规则1** :局部变量和全局变量是不同的变量
    * 局部变量是函数内部的占位符，与全局变量可能重名但不同
    * 函数运算结束后，局部变量被释放
    * 可以使用*global* 保留字在函数内部使用全局变量

**示例** 局部变量和全局变量不同  

```py
n, s = 10, 100
def fact(n):
    s = 1   #这里的s是局部变量，与全局变量s不同
    for i in range(1, n+1):
        s *= i
    return s    #这里返回的是局部变量的s，是3628800
print(fact(n), s)   #这里的是全局变量 s的值是100

# 所以，结果如下：

>>> 3628800 100     #因为打印的是全局变量的s
```

**示例** 在函数中使用*global* ，即函数中使用全局变量

```py
n, s = 10, 100
def fact(n):
    golbal s    # fact()函数中使用golbal保留字，声明此处s是全局变量
    for i in range(1, n+1):
        s *= i
    return s    # 此处s指的是全局变量s
print(fact(n), s)   # 此处局部变量s被函数修改
```

**规则2** :局部变量为组合数据类型且未创建，等同于全局变量  




## 5.2 实例7：七段数码管绘制

## 5.3 代码复用与函数递归

## 5.4 模块4：PyInstaller库的使用

## 5.5 实例8：科赫雪花小包裹


